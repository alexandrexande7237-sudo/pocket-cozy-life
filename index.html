<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pocket Cozy Life</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<style>
/* Estilos Globais e Reset */
body{
  margin:0;
  background:#f4f4f4;
  font-family:'Poppins', Arial, sans-serif;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}

#app{
  max-width:360px;
  width:100%;
  height:800px;
  margin:auto;
  background:#fff;
  display:flex;
  flex-direction:column;
  border-radius:20px;
  box-shadow:0 10px 30px rgba(0,0,0,0.1);
  overflow:hidden;
}

header{
  background:#ffb3c1;
  color:#fff;
  text-align:center;
  padding:15px;
  font-size:22px;
  font-weight:700;
  box-shadow:0 2px 5px rgba(0,0,0,0.1);
}

#hud{
  display:flex;
  justify-content:space-around;
  background:#ffccd5;
  padding:10px;
  font-weight:600;
  font-size:16px;
}

#hud div{
  background:#fff;
  padding:5px 10px;
  border-radius:15px;
  box-shadow:inset 0 1px 3px rgba(0,0,0,0.1);
}

#room{
  flex:1;
  background:#fff3e0;
  position:relative;
  overflow:hidden;
}

.character{
  position:absolute;
  bottom:20px;
  font-size:60px;
  transition:left 0.5s ease-in-out;
}

#player{ left:60px; }
#partner{ left:180px; }
#pet{
  left:280px;
  font-size:45px;
}

.furniture-item{
  position:absolute;
  font-size:40px;
  cursor:pointer;
  /* Garante que a mob√≠lia fique atr√°s dos personagens */
  z-index: 1; 
}


#status{
  text-align:center;
  background:#f8bbd0;
  color:#444;
  padding:8px;
  font-size:16px;
  font-weight:600;
}

footer{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:8px;
  padding:10px;
  background:#ffe8e8;
}

button{
  border:none;
  border-radius:15px;
  background:#ff6f91;
  color:white;
  padding:12px 8px;
  font-size:14px;
  font-weight:600;
  cursor:pointer;
  box-shadow:0 3px 0 #d94b6f;
  transition:all 0.1s;
}

button:active{
  box-shadow:0 1px 0 #d94b6f;
  transform:translateY(2px);
}

/* Estilos da Modal (Invent√°rio e Loja) */
.modal {
  display: none;
  position: fixed;
  z-index: 100; /* Alto z-index para ficar acima de tudo */
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background-color: rgba(0,0,0,0.5);
}

.modal-content {
  background-color: #fff;
  margin: 10% auto;
  padding: 20px;
  border-radius: 20px;
  width: 90%;
  max-width: 340px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.4);
}

.close-button {
  color: #aaa;
  float: right;
  font-size: 28px;
  font-weight: bold;
}

.close-button:hover,
.close-button:focus {
  color: #000;
  text-decoration: none;
  cursor: pointer;
}

/* Estilo espec√≠fico para lista de itens na modal */
.item-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding: 10px 0;
}

.item-list div {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px;
  border-bottom: 1px solid #eee;
}
.item-list div:last-child {
  border-bottom: none;
}
</style>
</head>

<body>

<div id="app">

<header>Pocket Cozy Life</header>

<div id="hud">
  <div>üí∞ <span id="money">100</span></div>
  <div>‚ù§Ô∏è <span id="love">75</span></div>
</div>

<div id="room">
  <div id="furniture-container"></div>
  <div id="player" class="character">üòä</div>
  <div id="partner" class="character">ü•∞</div>
  <div id="pet" class="character">üê∂</div>
</div>

<div id="status">Voc√™ est√° na Cozinha</div>

<footer>
  <button onclick="changeRoom()">üè† C√¥modo</button>
  <button onclick="work()">üíº Trabalhar</button>
  <button onclick="loveUp()">üíñ Amor</button>
  <button onclick="openShop()">üõçÔ∏è Loja</button>
  <button onclick="openInventory()">üëï Invent√°rio</button>
  <button onclick="addItemToRoom(SHOP_ITEMS.furniture[0])">üõãÔ∏è Colocar</button>
</footer>

</div>

<div id="inventoryModal" class="modal">
  <div class="modal-content">
    <span class="close-button" onclick="closeModal('inventoryModal')">&times;</span>
    <h3>üëï Invent√°rio de Roupas</h3>
    <div id="inventoryClothesList" class="item-list"></div>

    <h3>üõãÔ∏è Mob√≠lia Colocada</h3>
    <div id="inventoryFurnitureList" class="item-list"></div>
  </div>
</div>

<div id="shopModal" class="modal">
  <div class="modal-content">
    <span class="close-button" onclick="closeModal('shopModal')">&times;</span>
    <h3>üõçÔ∏è Loja de Itens</h3>
    
    <h4>Roupas (Skins)</h4>
    <div id="shopClothesList" class="item-list"></div>
    
    <h4>Mob√≠lia</h4>
    <div id="shopFurnitureList" class="item-list"></div>
  </div>
</div>

<script>
// --- Vari√°veis Globais ---
let money=100;
let love=75;
let roomIndex=0;
let furnitureItems = []; // Array para rastrear a mob√≠lia colocada
let playerSkinIndex = 0;
let partnerSkinIndex = 0;
let petSkinIndex = 0;

// Itens possu√≠dos (Inicialmente apenas os skins base)
let ownedSkins = {
    player: [0],
    partner: [0],
    pet: [0]
};
let ownedFurniture = {}; // Mob√≠lia comprada, mas N√ÉO colocada na sala

// --- Cat√°logo de Itens ---
const SHOP_ITEMS = {
    // Lista de Roupas/Skins
    skins: [
        { char: 'player', id: 0, icon: "üòä", name: "Padr√£o", price: 0 },
        { char: 'partner', id: 0, icon: "ü•∞", name: "Padr√£o", price: 0 },
        { char: 'pet', id: 0, icon: "üê∂", name: "Padr√£o", price: 0 },
        
        { char: 'player', id: 1, icon: "üòé", name: "√ìculos de Sol", price: 50 },
        { char: 'player', id: 2, icon: "üòá", name: "Aur√©ola", price: 75 },
        { char: 'player', id: 3, icon: "üßë‚Äçüíª", name: "Gamer", price: 120 },

        { char: 'partner', id: 1, icon: "üòç", name: "Cora√ß√£o", price: 50 },
        { char: 'partner', id: 2, icon: "üòò", name: "Beijinho", price: 75 },
        { char: 'partner', id: 3, icon: "üë©‚Äçüç≥", name: "Cozinheira", price: 120 },

        { char: 'pet', id: 1, icon: "üê±", name: "Gatinho", price: 40 },
        { char: 'pet', id: 2, icon: "üê∞", name: "Coelhinho", price: 60 },
        { char: 'pet', id: 3, icon: "üêª", name: "Ursinho", price: 100 },
    ],
    // Lista de Mob√≠lia (icon: O emoji, key: Identificador √∫nico, price: Pre√ßo)
    furniture: [
        { icon: "üõãÔ∏è", key: "sofa_red", name: "Sof√° Vermelho", price: 50 },
        { icon: "ü™ë", key: "chair_wood", name: "Cadeira de Madeira", price: 30 },
        { icon: "üñºÔ∏è", key: "painting", name: "Quadro", price: 80 },
        { icon: "ü™¥", key: "plant_pot", name: "Vaso de Planta", price: 40 },
        { icon: "üì∫", key: "tv_flat", name: "Televis√£o", price: 150 },
    ]
};

// --- Configura√ß√µes do Jogo ---
const rooms=[
  {name:"Cozinha", color:"#fff3e0"},
  {name:"Sala", color:"#e3f2fd"},
  {name:"Quarto", color:"#fce4ec"},
  {name:"Jardim", color:"#e8f5e9"}
];

// --- Elementos DOM ---
const room=document.getElementById("room");
const status=document.getElementById("status");
const moneySpan=document.getElementById("money");
const loveSpan=document.getElementById("love");
const furnitureContainer = document.getElementById("furniture-container");
const playerChar = document.getElementById("player");
const partnerChar = document.getElementById("partner");
const petChar = document.getElementById("pet");
const shopModal = document.getElementById("shopModal");
const inventoryModal = document.getElementById("inventoryModal");


// --- Fun√ß√µes Principais do Jogo ---

function changeRoom(){
  roomIndex=(roomIndex+1)%rooms.length;
  room.style.background=rooms[roomIndex].color;
  status.innerText="Voc√™ est√° na "+rooms[roomIndex].name;
}

function updateMoney(amount){
    money += amount;
    moneySpan.innerText = money;
}

function work(){
  updateMoney(20);
  status.innerText="Voc√™ trabalhou üíº (+20$)";
}

function loveUp(){
  love+=5;
  loveSpan.innerText=love;
  status.innerText="Momento fofo üíñ (+5 Love)";
}

// Coloca um item de mob√≠lia na sala (n√£o precisa de invent√°rio para isso agora)
function addItemToRoom(item){
    // Este item √© o item da lista SHOP_ITEMS.furniture
    const itemElement = document.createElement("div");
    itemElement.innerText = item.icon;
    itemElement.classList.add("furniture-item");
    
    // Posi√ß√£o aleat√≥ria
    itemElement.style.bottom = Math.floor(Math.random() * 50) + 10 + "px"; 
    itemElement.style.left = Math.floor(Math.random() * 260) + 20 + "px"; 

    furnitureContainer.appendChild(itemElement);
    
    // Rastreamento da mob√≠lia colocada
    furnitureItems.push({
        id: Date.now(), // ID √∫nico
        key: item.key,
        name: item.name,
        icon: item.icon,
        element: itemElement 
    });

    status.innerText = `Mob√≠lia colocada: ${item.name} ${item.icon}`;
}


// --- Fun√ß√µes da Modal ---

function openModal(modalId) {
    document.getElementById(modalId).style.display = "block";
}

function closeModal(modalId) {
    document.getElementById(modalId).style.display = "none";
}

// --- Fun√ß√µes da Loja ---

function openShop() {
    updateShopList();
    openModal('shopModal');
}

function updateShopList() {
    const shopClothesList = document.getElementById("shopClothesList");
    const shopFurnitureList = document.getElementById("shopFurnitureList");
    
    shopClothesList.innerHTML = '';
    shopFurnitureList.innerHTML = '';

    // Roupas
    SHOP_ITEMS.skins.forEach(item => {
        // Ignora skins padr√£o (id=0) para compra
        if(item.id === 0) return; 

        const isOwned = ownedSkins[item.char].includes(item.id);
        const div = document.createElement("div");
        div.innerHTML = `${item.icon} ${item.name} (${item.char})`;
        
        if (isOwned) {
            div.innerHTML += `<span>‚úîÔ∏è Possu√≠do</span>`;
        } else {
            div.innerHTML += `<span>üí∞ ${item.price} <button onclick="buyItem('skin', '${item.char}', ${item.id}, ${item.price})">Comprar</button></span>`;
        }
        shopClothesList.appendChild(div);
    });

    // Mob√≠lia (A mob√≠lia √© infinita e n√£o rastreamos o estoque por simplicidade)
    SHOP_ITEMS.furniture.forEach(item => {
        const div = document.createElement("div");
        div.innerHTML = `${item.icon} ${item.name}`;
        div.innerHTML += `<span>üí∞ ${item.price} <button onclick="buyItem('furniture', '${item.key}', ${item.key}, ${item.price})">Comprar</button></span>`;
        shopFurnitureList.appendChild(div);
    });
}

function buyItem(type, key, id, price) {
    if (money < price) {
        status.innerText = "‚ùå Dinheiro insuficiente!";
        return;
    }

    updateMoney(-price);
    
    if (type === 'skin') {
        // Adiciona a skin comprada ao invent√°rio de posse
        const skinItem = SHOP_ITEMS.skins.find(s => s.char === key && s.id === id);
        if (skinItem && !ownedSkins[key].includes(id)) {
            ownedSkins[key].push(id);
            status.innerText = `‚úÖ Voc√™ comprou: ${skinItem.name} ${skinItem.icon}!`;
            updateShopList(); // Atualiza a loja para mostrar que foi comprado
        }
    } else if (type === 'furniture') {
        // Mob√≠lia comprada (adicione ao estoque de mob√≠lia que pode ser colocada)
        const furnitureItem = SHOP_ITEMS.furniture.find(f => f.key === key);
        if (furnitureItem) {
            // Apenas para simular a compra, voc√™ pode querer adicionar ao 'ownedFurniture' aqui
            status.innerText = `‚úÖ Voc√™ comprou: ${furnitureItem.name} ${furnitureItem.icon}! Agora coloque-a na sala.`;
        }
    }
    
    // Fecha a loja e atualiza o status
    closeModal('shopModal');
}

// --- Fun√ß√µes de Invent√°rio (Customiza√ß√£o) ---

function openInventory() {
    updateInventoryList();
    openModal('inventoryModal');
}

function updateInventoryList() {
    const invClothesList = document.getElementById("inventoryClothesList");
    const invFurnitureList = document.getElementById("inventoryFurnitureList");
    
    invClothesList.innerHTML = '';
    invFurnitureList.innerHTML = '';

    // 1. Lista de Roupas Compradas (Skins)
    ['player', 'partner', 'pet'].forEach(char => {
        const charName = char.charAt(0).toUpperCase() + char.slice(1);
        
        ownedSkins[char].forEach(skinId => {
            const skinItem = SHOP_ITEMS.skins.find(s => s.char === char && s.id === skinId);
            if (!skinItem) return;

            const isEquipped = (char === 'player' && playerSkinIndex === skinId) ||
                               (char === 'partner' && partnerSkinIndex === skinId) ||
                               (char === 'pet' && petSkinIndex === skinId);

            const div = document.createElement("div");
            div.innerHTML = `${skinItem.icon} ${skinItem.name} (${charName})`;
            
            if (isEquipped) {
                div.innerHTML += `<span>‚úÖ Vestindo</span>`;
            } else {
                div.innerHTML += `<span><button onclick="changeSkin('${char}', ${skinId})">Vestir</button></span>`;
            }
            invClothesList.appendChild(div);
        });
    });

    // 2. Mob√≠lia Colocada na Sala
    if(furnitureItems.length > 0){
        furnitureItems.forEach(item => {
            const div = document.createElement("div");
            div.innerHTML = `${item.icon} ${item.name} (${rooms[roomIndex].name})`;
            div.innerHTML += `<span><button onclick="removeItem(${item.id})">Remover</button></span>`;
            invFurnitureList.appendChild(div);
        });
    } else {
         invFurnitureList.innerHTML = '<p>Nenhuma mob√≠lia na sala.</p>';
    }
}

// Troca a skin do personagem e atualiza o display
function changeSkin(char, id) {
    const skinItem = SHOP_ITEMS.skins.find(s => s.char === char && s.id === id);
    if (!skinItem) return;

    if (char === 'player') {
        playerChar.innerText = skinItem.icon;
        playerSkinIndex = id;
    } else if (char === 'partner') {
        partnerChar.innerText = skinItem.icon;
        partnerSkinIndex = id;
    } else if (char === 'pet') {
        petChar.innerText = skinItem.icon;
        petSkinIndex = id;
    }
    
    status.innerText = `Skin de ${char} alterada para ${skinItem.name} ${skinItem.icon}!`;
    updateInventoryList(); // Atualiza a lista para refletir a skin vestida
    closeModal('inventoryModal');
}

// Remove um item de mob√≠lia da sala
function removeItem(id) {
    const itemIndex = furnitureItems.findIndex(item => item.id === id);
    if(itemIndex > -1) {
        // Remove do DOM
        furnitureItems[itemIndex].element.remove();
        // Remove do array de rastreamento
        furnitureItems.splice(itemIndex, 1); 
        status.innerText = "Mob√≠lia removida da sala!";
        updateInventoryList(); 
    }
}


// --- Inicializa√ß√£o ---
// Fecha as modais se o usu√°rio clicar fora delas
window.onclick = function(event) {
    if (event.target == inventoryModal) {
        closeModal('inventoryModal');
    }
    if (event.target == shopModal) {
        closeModal('shopModal');
    }
}
</script>

</body>
</html>
