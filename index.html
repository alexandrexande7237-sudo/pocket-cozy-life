<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pocket Cozy Life</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
 <link rel="icon" type="image/png" href="favicon.png"> 
    <link rel="shortcut icon" type="image/png" href="65 Sem T√≠tulo_20251225154106.png">
<style>
/* Estilos Globais e Reset */
body{
  margin:0;
  background:#f4f4f4;
  font-family:'Poppins', Arial, sans-serif;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}

#app{
  max-width:360px;
  width:100%;
  height:800px;
  margin:auto;
  background:#fff;
  display:flex;
  flex-direction:column;
  border-radius:20px;
  box-shadow:0 10px 30px rgba(0,0,0,0.15); /* Sombra mais forte */
  overflow:hidden;
}

header{
  background:#ffb3c1;
  color:#fff;
  text-align:center;
  padding:15px;
  font-size:22px;
  font-weight:700;
  box-shadow:0 2px 5px rgba(0,0,0,0.1);
}

#hud{
  display:flex;
  justify-content:space-around;
  background:#ffccd5;
  padding:10px;
  font-weight:600;
  font-size:16px;
}

#hud div{
  background:#fff;
  padding:5px 10px;
  border-radius:15px;
  box-shadow:inset 0 1px 3px rgba(0,0,0,0.1);
}

#room{
  flex:1;
  background:#fff3e0;
  position:relative;
  overflow:hidden;
}

.character{
  position:absolute;
  bottom:20px;
  font-size:60px;
  transition:left 0.5s ease-in-out;
  z-index: 2; /* Sempre na frente da mob√≠lia */
}

#player{ left:60px; }
#partner{ left:180px; }
#pet{
  left:280px;
  font-size:45px;
}

.furniture-item{
  position:absolute;
  font-size:40px;
  cursor:pointer;
  z-index: 1; 
}


#status{
  text-align:center;
  background:#f8bbd0;
  color:#444;
  padding:8px;
  font-size:16px;
  font-weight:600;
}

footer{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:8px;
  padding:10px;
  background:#ffe8e8;
}

button{
  border:none;
  border-radius:15px;
  background:#ff6f91;
  color:white;
  padding:12px 8px;
  font-size:14px;
  font-weight:600;
  cursor:pointer;
  box-shadow:0 3px 0 #d94b6f;
  transition:all 0.1s;
}

button:active{
  box-shadow:0 1px 0 #d94b6f;
  transform:translateY(2px);
}

/* Estilos da Modal (Invent√°rio e Loja) - Melhorados */
.modal {
  display: none;
  position: fixed;
  z-index: 100;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background-color: rgba(0,0,0,0.6);
}

.modal-content {
  background-color: #fff;
  margin: 10% auto;
  padding: 25px;
  border-radius: 20px;
  width: 90%;
  max-width: 340px;
  box-shadow: 0 5px 20px rgba(0,0,0,0.5);
}

.close-button {
  color: #aaa;
  float: right;
  font-size: 32px;
  font-weight: bold;
}
.close-button:hover,
.close-button:focus {
  color: #000;
  text-decoration: none;
  cursor: pointer;
}
.modal h3 {
    border-bottom: 2px solid #ffccd5;
    padding-bottom: 5px;
    margin-top: 20px;
    font-size: 18px;
    color: #ff6f91;
}

/* Estilo para Lista de Itens (Cat√°logo e Invent√°rio) */
.item-list {
  display: grid;
  grid-template-columns: 1fr 1fr; /* Duas colunas para itens */
  gap: 12px;
  padding: 10px 0;
  max-height: 250px;
  overflow-y: auto; /* Scroll para listas longas */
}

.item-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: space-between;
    padding: 10px;
    border: 1px solid #ffccd5;
    border-radius: 10px;
    text-align: center;
    font-size: 12px;
    min-height: 120px;
}
.item-card .icon {
    font-size: 30px;
    margin-bottom: 5px;
}
.item-card button {
    margin-top: 5px;
    padding: 6px 10px;
    font-size: 11px;
    width: 90%;
}
.item-card .equipped {
    color: green;
    font-weight: bold;
}
</style>
</head>

<body onload="loadGame()"> <div id="app">

<header>Pocket Cozy Life</header>

<div id="hud">
  <div>üí∞ <span id="money">100</span></div>
  <div>‚ù§Ô∏è <span id="love">75</span></div>
  <button onclick="saveGame()" style="background:#ffb3c1;box-shadow:0 3px 0 #cf919d; font-size:12px;">üíæ Salvar</button>
</div>

<div id="room">
  <div id="furniture-container"></div>
  <div id="player" class="character">üòä</div>
  <div id="partner" class="character">ü•∞</div>
  <div id="pet" class="character">üê∂</div>
</div>

<div id="status">Bem-vindo(a) ao Pocket Cozy Life!</div>

<footer>
  <button onclick="changeRoom()">üè† C√¥modo</button>
  <button onclick="work()">üíº Trabalhar</button>
  <button onclick="loveUp()">üíñ Amor</button>
  <button onclick="openShop()">üõçÔ∏è Loja</button>
  <button onclick="openInventory()">üëï Invent√°rio</button>
  <button onclick="openPlaceFurniture()">üõãÔ∏è Colocar</button>
</footer>

</div>

<div id="inventoryModal" class="modal">
  <div class="modal-content">
    <span class="close-button" onclick="closeModal('inventoryModal')">&times;</span>
    <h3>üëï Suas Roupas (Skins)</h3>
    <div id="inventoryClothesList" class="item-list"></div>
    
    <h3>üõãÔ∏è Mob√≠lia na Sala</h3>
    <div id="inventoryFurnitureList" class="item-list"></div>
  </div>
</div>

<div id="shopModal" class="modal">
  <div class="modal-content">
    <span class="close-button" onclick="closeModal('shopModal')">&times;</span>
    <h3>üõçÔ∏è Loja de Itens</h3>
    
    <h4>Roupas (Skins)</h4>
    <div id="shopClothesList" class="item-list"></div>
    
    <h4>Mob√≠lia</h4>
    <div id="shopFurnitureList" class="item-list"></div>
  </div>
</div>

<div id="placeModal" class="modal">
  <div class="modal-content">
    <span class="close-button" onclick="closeModal('placeModal')">&times;</span>
    <h3>üõãÔ∏è Mob√≠lia para Colocar</h3>
    <p>Itens que voc√™ possui e pode colocar na sala:</p>
    <div id="placeFurnitureList" class="item-list"></div>
  </div>
</div>

<script>
// --- Vari√°veis Globais (Valores Padr√£o) ---
let money = 100;
let love = 75;
let roomIndex = 0;
let furnitureItems = []; // Mob√≠lia colocada na sala (elementos HTML)

// Estado da Customiza√ß√£o
let playerSkinId = 0;
let partnerSkinId = 0;
let petSkinId = 0;

// Itens possu√≠dos (IDs dos cat√°logos)
let ownedSkins = {
    player: [0], // 0 √© o default
    partner: [0],
    pet: [0]
};
let ownedFurniture = []; // Chaves da mob√≠lia que pode ser colocada

// --- Cat√°logo de Itens ---
const SHOP_ITEMS = {
    skins: [
        { char: 'player', id: 0, icon: "üòä", name: "Padr√£o", price: 0 },
        { char: 'partner', id: 0, icon: "ü•∞", name: "Padr√£o", price: 0 },
        { char: 'pet', id: 0, icon: "üê∂", name: "Padr√£o", price: 0 },
        
        { char: 'player', id: 1, icon: "üòé", name: "√ìculos de Sol", price: 50 },
        { char: 'player', id: 2, icon: "üòá", name: "Aur√©ola", price: 75 },
        { char: 'player', id: 3, icon: "üßë‚Äçüíª", name: "Gamer", price: 120 },

        { char: 'partner', id: 1, icon: "üòç", name: "Cora√ß√£o", price: 50 },
        { char: 'partner', id: 2, icon: "üòò", name: "Beijinho", price: 75 },
        { char: 'partner', id: 3, icon: "üë©‚Äçüç≥", name: "Cozinheira", price: 120 },

        { char: 'pet', id: 1, icon: "üê±", name: "Gatinho", price: 40 },
        { char: 'pet', id: 2, icon: "üê∞", name: "Coelhinho", price: 60 },
        { char: 'pet', id: 3, icon: "üêª", name: "Ursinho", price: 100 },
    ],
    furniture: [
        { icon: "üõãÔ∏è", key: "sofa_red", name: "Sof√° Vermelho", price: 50 },
        { icon: "ü™ë", key: "chair_wood", name: "Cadeira de Madeira", price: 30 },
        { icon: "üñºÔ∏è", key: "painting", name: "Quadro", price: 80 },
        { icon: "ü™¥", key: "plant_pot", name: "Vaso de Planta", price: 40 },
        { icon: "üì∫", key: "tv_flat", name: "Televis√£o", price: 150 },
    ]
};

// --- Elementos DOM ---
const room=document.getElementById("room");
const status=document.getElementById("status");
const moneySpan=document.getElementById("money");
const loveSpan=document.getElementById("love");
const furnitureContainer = document.getElementById("furniture-container");
const playerChar = document.getElementById("player");
const partnerChar = document.getElementById("partner");
const petChar = document.getElementById("pet");

// --- Fun√ß√µes de Estado e Salvar/Carregar ---

function updateDisplay() {
    moneySpan.innerText = money;
    loveSpan.innerText = love;
    
    // Atualiza o estado da sala (cor e nome)
    room.style.background = rooms[roomIndex].color;
    status.innerText = `Voc√™ est√° na ${rooms[roomIndex].name}`;

    // Atualiza a apar√™ncia dos personagens
    playerChar.innerText = SHOP_ITEMS.skins.find(s => s.char === 'player' && s.id === playerSkinId)?.icon || 'üòä';
    partnerChar.innerText = SHOP_ITEMS.skins.find(s => s.char === 'partner' && s.id === partnerSkinId)?.icon || 'ü•∞';
    petChar.innerText = SHOP_ITEMS.skins.find(s => s.char === 'pet' && s.id === petSkinId)?.icon || 'üê∂';
}

function saveGame() {
    const gameState = {
        money,
        love,
        roomIndex,
        playerSkinId,
        partnerSkinId,
        petSkinId,
        ownedSkins,
        ownedFurniture,
        // Mob√≠lia na sala (salva apenas os dados para recriar, n√£o o elemento HTML)
        placedFurnitureData: furnitureItems.map(item => ({
            key: item.key,
            bottom: item.element.style.bottom,
            left: item.element.style.left
        }))
    };
    
    try {
        localStorage.setItem('pocketCozyLifeSave', JSON.stringify(gameState));
        status.innerText = "‚úÖ Jogo Salvo com Sucesso!";
    } catch (e) {
        status.innerText = "‚ùå Erro ao salvar o jogo.";
        console.error("Save error:", e);
    }
}

function loadGame() {
    try {
        const savedData = localStorage.getItem('pocketCozyLifeSave');
        if (savedData) {
            const gameState = JSON.parse(savedData);
            
            // Carrega vari√°veis principais
            money = gameState.money;
            love = gameState.love;
            roomIndex = gameState.roomIndex;

            // Carrega customiza√ß√£o
            playerSkinId = gameState.playerSkinId;
            partnerSkinId = gameState.partnerSkinId;
            petSkinId = gameState.petSkinId;
            ownedSkins = gameState.ownedSkins;
            ownedFurniture = gameState.ownedFurniture;

            // Limpa a sala e recria a mob√≠lia
            furnitureContainer.innerHTML = '';
            furnitureItems = [];
            gameState.placedFurnitureData.forEach(data => {
                const item = SHOP_ITEMS.furniture.find(f => f.key === data.key);
                if (item) {
                    recreateFurniture(item, data.bottom, data.left);
                }
            });

            updateDisplay();
            status.innerText = "‚úÖ Jogo Carregado!";
        } else {
            updateDisplay();
        }
    } catch (e) {
        status.innerText = "‚ùå Erro ao carregar o jogo. Iniciando novo jogo.";
        console.error("Load error:", e);
        updateDisplay();
    }
}


// --- Fun√ß√µes Principais do Jogo ---

const rooms=[
  {name:"Cozinha", color:"#fff3e0"},
  {name:"Sala", color:"#e3f2fd"},
  {name:"Quarto", color:"#fce4ec"},
  {name:"Jardim", color:"#e8f5e9"}
];

function changeRoom(){
  roomIndex=(roomIndex+1)%rooms.length;
  updateDisplay();
  saveGame();
}

function updateMoney(amount){
    money += amount;
    updateDisplay();
    saveGame();
}

function work(){
  updateMoney(20);
  status.innerText="Voc√™ trabalhou üíº (+20$)";
}

function loveUp(){
  love+=5;
  updateDisplay();
  status.innerText="Momento fofo üíñ (+5 Love)";
}

// Recria um item de mob√≠lia na sala com base em dados salvos
function recreateFurniture(item, bottom, left) {
    const itemElement = document.createElement("div");
    itemElement.innerText = item.icon;
    itemElement.classList.add("furniture-item");
    
    itemElement.style.bottom = bottom;
    itemElement.style.left = left; 

    furnitureContainer.appendChild(itemElement);
    
    furnitureItems.push({
        id: Date.now() + Math.random(), // ID √∫nico
        key: item.key,
        name: item.name,
        icon: item.icon,
        element: itemElement 
    });
}

// Coloca um item de mob√≠lia na sala (a partir da Place Modal)
function addItemToRoom(key){
    const item = SHOP_ITEMS.furniture.find(f => f.key === key);
    if (!item) return;

    // Remove o item da lista de posse para "colocar" (se voc√™ quiser rastrear estoque)
    const indexInOwned = ownedFurniture.indexOf(key);
    if (indexInOwned > -1) {
         // Se quiser rastrear o estoque de m√≥veis, remova aqui:
         // ownedFurniture.splice(indexInOwned, 1);
    }
    
    // Posi√ß√£o aleat√≥ria (como antes)
    const bottom = Math.floor(Math.random() * 50) + 10 + "px"; 
    const left = Math.floor(Math.random() * 260) + 20 + "px"; 
    
    recreateFurniture(item, bottom, left);
    closeModal('placeModal');
    status.innerText = `Mob√≠lia colocada: ${item.name} ${item.icon}`;
    saveGame();
}


// --- Fun√ß√µes da Modal ---

function openModal(modalId) {
    document.getElementById(modalId).style.display = "block";
}

function closeModal(modalId) {
    document.getElementById(modalId).style.display = "none";
}

// --- Fun√ß√µes da Loja ---

function openShop() {
    updateShopList();
    openModal('shopModal');
}

function updateShopList() {
    const shopClothesList = document.getElementById("shopClothesList");
    const shopFurnitureList = document.getElementById("shopFurnitureList");
    
    shopClothesList.innerHTML = '';
    shopFurnitureList.innerHTML = '';

    // Roupas
    SHOP_ITEMS.skins.filter(item => item.id !== 0).forEach(item => {
        const isOwned = ownedSkins[item.char].includes(item.id);
        const card = document.createElement("div");
        card.classList.add("item-card");

        card.innerHTML = `<span class="icon">${item.icon}</span>`;
        card.innerHTML += `<p>${item.name} (${item.char === 'player' ? 'Voc√™' : item.char === 'partner' ? 'Parceiro' : 'Pet'})</p>`;
        
        if (isOwned) {
            card.innerHTML += `<button style="background:#4CAF50; box-shadow:0 3px 0 #388E3C;">‚úîÔ∏è Possu√≠do</button>`;
        } else {
            card.innerHTML += `<button onclick="buyItem('skin', '${item.char}', ${item.id}, ${item.price})">üí∞ ${item.price}</button>`;
        }
        shopClothesList.appendChild(card);
    });

    // Mob√≠lia (A mob√≠lia √© comprada e armazenada no invent√°rio 'ownedFurniture')
    SHOP_ITEMS.furniture.forEach(item => {
        const card = document.createElement("div");
        card.classList.add("item-card");

        card.innerHTML = `<span class="icon">${item.icon}</span>`;
        card.innerHTML += `<p>${item.name}</p>`;
        card.innerHTML += `<button onclick="buyItem('furniture', '${item.key}', null, ${item.price})">üí∞ ${item.price}</button>`;
        
        shopFurnitureList.appendChild(card);
    });
}

function buyItem(type, key, id, price) {
    if (money < price) {
        status.innerText = "‚ùå Dinheiro insuficiente!";
        return;
    }

    updateMoney(-price); // J√° chama saveGame()
    
    if (type === 'skin') {
        const skinItem = SHOP_ITEMS.skins.find(s => s.char === key && s.id === id);
        if (skinItem && !ownedSkins[key].includes(id)) {
            ownedSkins[key].push(id);
            status.innerText = `‚úÖ Voc√™ comprou: ${skinItem.name} ${skinItem.icon}!`;
            updateShopList(); // Atualiza a loja
        }
    } else if (type === 'furniture') {
        const furnitureItem = SHOP_ITEMS.furniture.find(f => f.key === key);
        if (furnitureItem) {
            ownedFurniture.push(key); // Adiciona ao estoque de mob√≠lia que pode ser colocada
            status.innerText = `‚úÖ Voc√™ comprou: ${furnitureItem.name} ${furnitureItem.icon}! Agora coloque-a na sala.`;
        }
    }
    
    closeModal('shopModal');
    saveGame();
}

// --- Fun√ß√µes de Invent√°rio (Customiza√ß√£o) ---

function openInventory() {
    updateInventoryClothesList();
    updateInventoryFurnitureList();
    openModal('inventoryModal');
}

function updateInventoryClothesList() {
    const invClothesList = document.getElementById("inventoryClothesList");
    invClothesList.innerHTML = '';

    // Lista de Roupas Compradas (Skins)
    ['player', 'partner', 'pet'].forEach(char => {
        ownedSkins[char].forEach(skinId => {
            const skinItem = SHOP_ITEMS.skins.find(s => s.char === char && s.id === skinId);
            if (!skinItem) return;

            const isEquipped = (char === 'player' && playerSkinId === skinId) ||
                               (char === 'partner' && partnerSkinId === skinId) ||
                               (char === 'pet' && petSkinId === skinId);

            const card = document.createElement("div");
            card.classList.add("item-card");
            card.innerHTML = `<span class="icon">${skinItem.icon}</span>`;
            card.innerHTML += `<p>${skinItem.name}</p>`;
            
            if (isEquipped) {
                card.innerHTML += `<span class="equipped">‚úÖ Vestindo</span>`;
            } else {
                card.innerHTML += `<span><button onclick="changeSkin('${char}', ${skinId})">Vestir</button></span>`;
            }
            invClothesList.appendChild(card);
        });
    });
}

function updateInventoryFurnitureList() {
    const invFurnitureList = document.getElementById("inventoryFurnitureList");
    invFurnitureList.innerHTML = '';
    
    // Mob√≠lia Colocada na Sala
    if(furnitureItems.length > 0){
        furnitureItems.forEach(item => {
            const card = document.createElement("div");
            card.classList.add("item-card");
            card.innerHTML = `<span class="icon">${item.icon}</span>`;
            card.innerHTML += `<p>${item.name}</p>`;
            card.innerHTML += `<span><button onclick="removeItem(${item.id})">Remover</button></span>`;
            invFurnitureList.appendChild(card);
        });
    } else {
         invFurnitureList.innerHTML = '<p style="grid-column: 1 / span 2; text-align: center;">Nenhuma mob√≠lia na sala.</p>';
    }
}

// Troca a skin do personagem e salva
function changeSkin(char, id) {
    const skinItem = SHOP_ITEMS.skins.find(s => s.char === char && s.id === id);
    if (!skinItem) return;

    if (char === 'player') {
        playerSkinId = id;
    } else if (char === 'partner') {
        partnerSkinId = id;
    } else if (char === 'pet') {
        petSkinId = id;
    }
    
    status.innerText = `Skin de ${char} alterada para ${skinItem.name} ${skinItem.icon}!`;
    updateDisplay();
    updateInventoryClothesList(); // Atualiza a modal do invent√°rio
    saveGame();
}

// Remove um item de mob√≠lia da sala e salva
function removeItem(id) {
    const itemIndex = furnitureItems.findIndex(item => item.id === id);
    if(itemIndex > -1) {
        furnitureItems[itemIndex].element.remove();
        furnitureItems.splice(itemIndex, 1); 
        status.innerText = "Mob√≠lia removida da sala!";
        updateInventoryFurnitureList(); 
        saveGame();
    }
}

// --- Fun√ß√µes de Colocar Mob√≠lia ---

function openPlaceFurniture() {
    updatePlaceFurnitureList();
    openModal('placeModal');
}

function updatePlaceFurnitureList() {
    const placeFurnitureList = document.getElementById("placeFurnitureList");
    placeFurnitureList.innerHTML = '';
    
    // Rastreia itens √∫nicos que o usu√°rio possui
    const uniqueOwnedFurniture = [...new Set(ownedFurniture)]; 
    
    if (uniqueOwnedFurniture.length > 0) {
        uniqueOwnedFurniture.forEach(key => {
            const item = SHOP_ITEMS.furniture.find(f => f.key === key);
            if (!item) return;
            
            // Conta quantas c√≥pias deste item o usu√°rio possui
            const count = ownedFurniture.filter(k => k === key).length; 

            const card = document.createElement("div");
            card.classList.add("item-card");
            card.innerHTML = `<span class="icon">${item.icon}</span>`;
            // N√£o exibimos a contagem, pois o objetivo √© ter v√°rias c√≥pias (como em Pocket Love)
            card.innerHTML += `<p>${item.name}</p>`; 
            card.innerHTML += `<span><button onclick="addItemToRoom('${key}')">Colocar</button></span>`;
            
            placeFurnitureList.appendChild(card);
        });
    } else {
         placeFurnitureList.
